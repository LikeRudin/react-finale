투표시스템에대한 고민

선착순 투표, 일반투표, 중복투표정도를만들어봄직한거같다.

투표를 위해필요한것은 투표를 하면응답이서버로부터 돌아와야한다는점이다.
getServerSideProps + useSWR로 처음 데이터를 받아오고 useMutation을 이용해서, 투표를 반영하면 되겠다.

1. 투표를 하면응답이 돌아와야한다.

- 투표 => mutate

2. 투표취소 혹은 변경에 대응해야 한다.

- 제 투표 or 투표 취소

3. 경쟁상태에 대응해야한다.

선착순투표같은경우에는 version column을이용해서 낙관적 락으로 경쟁상태를 배제해보자.

오늘할일: middleware 생성

user가 로그인한상태가아니면 enter로 redirect해주는 역할

1. 전역 Middleware 후기

Ironsession NextJs middleware 예제를 보면 세션을 미들웨어 내부에서 만들어 준후,
거기서 유저정보를 업데이트 해주어야한다.
사전에 정의된 유저정보를 사용할 수있는 방법이 없다.
